name: Test scripting

on:
  pull_request:
    paths-ignore:
      - 'screenshots/**'
      
jobs:
  screenshot:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Prepare Git
        env:
            BRANCH_BASE: ${{ github.head_ref }}
        run: |
          echo Base branch is $BRANCH_BASE
          git fetch origin
          git checkout -b $BRANCH_BASE origin/$BRANCH_BASE
      - name: Do stuff
        run: |
          date > text.txt
      - name: Commit Changes
        env:
            BRANCH_BASE: ${{ github.head_ref }}
        run: |
          GIT_STATUS=$(git status --porcelain)
          if [[ -n "$GIT_STATUS" ]]
          then
            git config --global user.email "bot@action.bot"
            git config --global user.name "beep-boop"
            git add .
            git commit -m "Addde CI"
            git push origin $BRANCH_BASE
          fi
